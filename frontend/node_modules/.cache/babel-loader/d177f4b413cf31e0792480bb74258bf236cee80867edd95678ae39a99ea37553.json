{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\CascadeProjects\\\\restaurant-delivery-app\\\\frontend\\\\src\\\\contexts\\\\CartContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useState, useContext, useEffect } from 'react';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext();\nexport const useCart = () => {\n  _s();\n  return useContext(CartContext);\n};\n_s(useCart, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const CartProvider = ({\n  children\n}) => {\n  _s2();\n  const [cartItems, setCartItems] = useState([]);\n  const [totalPrice, setTotalPrice] = useState(0);\n  const [totalItems, setTotalItems] = useState(0);\n\n  // Load cart from local storage on initial load\n  useEffect(() => {\n    const savedCart = localStorage.getItem('cart');\n    if (savedCart) {\n      try {\n        const parsedCart = JSON.parse(savedCart);\n        setCartItems(parsedCart);\n      } catch (error) {\n        console.error('Failed to parse saved cart', error);\n        localStorage.removeItem('cart');\n      }\n    }\n  }, []);\n\n  // Save cart to local storage whenever it changes\n  useEffect(() => {\n    localStorage.setItem('cart', JSON.stringify(cartItems));\n\n    // Calculate totals\n    let price = 0;\n    let items = 0;\n    cartItems.forEach(item => {\n      // Base price calculation\n      const itemTotal = item.price * item.quantity;\n\n      // Add extra costs if any\n      let extrasCost = 0;\n      if (item.extras && item.extras.length > 0) {\n        item.extras.forEach(extra => {\n          if (extra.price) {\n            extrasCost += extra.price;\n          }\n        });\n      }\n      price += itemTotal + extrasCost * item.quantity;\n      items += item.quantity;\n    });\n    setTotalPrice(price);\n    setTotalItems(items);\n  }, [cartItems]);\n\n  // Add item to cart\n  const addToCart = (dish, quantity = 1, extras = [], exclusions = []) => {\n    setCartItems(prevItems => {\n      // Check if item already exists in cart\n      const existingItemIndex = prevItems.findIndex(item => item.id === dish.id && JSON.stringify(item.extras) === JSON.stringify(extras) && JSON.stringify(item.exclusions) === JSON.stringify(exclusions));\n      if (existingItemIndex >= 0) {\n        // Update existing item quantity\n        const updatedItems = [...prevItems];\n        updatedItems[existingItemIndex].quantity += quantity;\n        toast.success(`Updated quantity for ${dish.name}`);\n        return updatedItems;\n      } else {\n        // Add new item to cart\n        toast.success(`Added ${dish.name} to cart`);\n        return [...prevItems, {\n          id: dish.id,\n          name: dish.name,\n          price: dish.price,\n          image: dish.imageUrl,\n          quantity,\n          extras,\n          exclusions\n        }];\n      }\n    });\n  };\n\n  // Update item quantity\n  const updateQuantity = (itemIndex, quantity) => {\n    if (quantity < 1) return;\n    setCartItems(prevItems => {\n      const updatedItems = [...prevItems];\n      updatedItems[itemIndex].quantity = quantity;\n      return updatedItems;\n    });\n  };\n\n  // Remove item from cart\n  const removeFromCart = itemIndex => {\n    setCartItems(prevItems => {\n      const item = prevItems[itemIndex];\n      toast.info(`Removed ${item.name} from cart`);\n      return prevItems.filter((_, index) => index !== itemIndex);\n    });\n  };\n\n  // Clear cart\n  const clearCart = () => {\n    setCartItems([]);\n    toast.info('Cart cleared');\n  };\n\n  // Prepare cart items for checkout\n  const prepareForCheckout = () => {\n    return cartItems.map(item => ({\n      dishId: item.id,\n      quantity: item.quantity,\n      extras: item.extras,\n      exclusions: item.exclusions\n    }));\n  };\n  const value = {\n    cartItems,\n    totalPrice,\n    totalItems,\n    addToCart,\n    updateQuantity,\n    removeFromCart,\n    clearCart,\n    prepareForCheckout\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 5\n  }, this);\n};\n_s2(CartProvider, \"U0fCVWvlqx6hloxFW9QZRcPNivM=\");\n_c = CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useState","useContext","useEffect","toast","jsxDEV","_jsxDEV","CartContext","useCart","_s","CartProvider","children","_s2","cartItems","setCartItems","totalPrice","setTotalPrice","totalItems","setTotalItems","savedCart","localStorage","getItem","parsedCart","JSON","parse","error","console","removeItem","setItem","stringify","price","items","forEach","item","itemTotal","quantity","extrasCost","extras","length","extra","addToCart","dish","exclusions","prevItems","existingItemIndex","findIndex","id","updatedItems","success","name","image","imageUrl","updateQuantity","itemIndex","removeFromCart","info","filter","_","index","clearCart","prepareForCheckout","map","dishId","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/HP/CascadeProjects/restaurant-delivery-app/frontend/src/contexts/CartContext.js"],"sourcesContent":["import React, { createContext, useState, useContext, useEffect } from 'react';\nimport { toast } from 'react-toastify';\n\nconst CartContext = createContext();\n\nexport const useCart = () => useContext(CartContext);\n\nexport const CartProvider = ({ children }) => {\n  const [cartItems, setCartItems] = useState([]);\n  const [totalPrice, setTotalPrice] = useState(0);\n  const [totalItems, setTotalItems] = useState(0);\n\n  // Load cart from local storage on initial load\n  useEffect(() => {\n    const savedCart = localStorage.getItem('cart');\n    if (savedCart) {\n      try {\n        const parsedCart = JSON.parse(savedCart);\n        setCartItems(parsedCart);\n      } catch (error) {\n        console.error('Failed to parse saved cart', error);\n        localStorage.removeItem('cart');\n      }\n    }\n  }, []);\n\n  // Save cart to local storage whenever it changes\n  useEffect(() => {\n    localStorage.setItem('cart', JSON.stringify(cartItems));\n    \n    // Calculate totals\n    let price = 0;\n    let items = 0;\n    \n    cartItems.forEach(item => {\n      // Base price calculation\n      const itemTotal = item.price * item.quantity;\n      \n      // Add extra costs if any\n      let extrasCost = 0;\n      if (item.extras && item.extras.length > 0) {\n        item.extras.forEach(extra => {\n          if (extra.price) {\n            extrasCost += extra.price;\n          }\n        });\n      }\n      \n      price += itemTotal + (extrasCost * item.quantity);\n      items += item.quantity;\n    });\n    \n    setTotalPrice(price);\n    setTotalItems(items);\n  }, [cartItems]);\n\n  // Add item to cart\n  const addToCart = (dish, quantity = 1, extras = [], exclusions = []) => {\n    setCartItems(prevItems => {\n      // Check if item already exists in cart\n      const existingItemIndex = prevItems.findIndex(\n        item => item.id === dish.id && \n               JSON.stringify(item.extras) === JSON.stringify(extras) &&\n               JSON.stringify(item.exclusions) === JSON.stringify(exclusions)\n      );\n      \n      if (existingItemIndex >= 0) {\n        // Update existing item quantity\n        const updatedItems = [...prevItems];\n        updatedItems[existingItemIndex].quantity += quantity;\n        toast.success(`Updated quantity for ${dish.name}`);\n        return updatedItems;\n      } else {\n        // Add new item to cart\n        toast.success(`Added ${dish.name} to cart`);\n        return [...prevItems, {\n          id: dish.id,\n          name: dish.name,\n          price: dish.price,\n          image: dish.imageUrl,\n          quantity,\n          extras,\n          exclusions\n        }];\n      }\n    });\n  };\n\n  // Update item quantity\n  const updateQuantity = (itemIndex, quantity) => {\n    if (quantity < 1) return;\n    \n    setCartItems(prevItems => {\n      const updatedItems = [...prevItems];\n      updatedItems[itemIndex].quantity = quantity;\n      return updatedItems;\n    });\n  };\n\n  // Remove item from cart\n  const removeFromCart = (itemIndex) => {\n    setCartItems(prevItems => {\n      const item = prevItems[itemIndex];\n      toast.info(`Removed ${item.name} from cart`);\n      return prevItems.filter((_, index) => index !== itemIndex);\n    });\n  };\n\n  // Clear cart\n  const clearCart = () => {\n    setCartItems([]);\n    toast.info('Cart cleared');\n  };\n\n  // Prepare cart items for checkout\n  const prepareForCheckout = () => {\n    return cartItems.map(item => ({\n      dishId: item.id,\n      quantity: item.quantity,\n      extras: item.extras,\n      exclusions: item.exclusions\n    }));\n  };\n\n  const value = {\n    cartItems,\n    totalPrice,\n    totalItems,\n    addToCart,\n    updateQuantity,\n    removeFromCart,\n    clearCart,\n    prepareForCheckout\n  };\n\n  return (\n    <CartContext.Provider value={value}>\n      {children}\n    </CartContext.Provider>\n  );\n};\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,QAAQ,EAAEC,UAAU,EAAEC,SAAS,QAAQ,OAAO;AAC7E,SAASC,KAAK,QAAQ,gBAAgB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvC,MAAMC,WAAW,gBAAGP,aAAa,CAAC,CAAC;AAEnC,OAAO,MAAMQ,OAAO,GAAGA,CAAA;EAAAC,EAAA;EAAA,OAAMP,UAAU,CAACK,WAAW,CAAC;AAAA;AAACE,EAAA,CAAxCD,OAAO;AAEpB,OAAO,MAAME,YAAY,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,GAAA;EAC5C,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACc,UAAU,EAAEC,aAAa,CAAC,GAAGf,QAAQ,CAAC,CAAC,CAAC;EAC/C,MAAM,CAACgB,UAAU,EAAEC,aAAa,CAAC,GAAGjB,QAAQ,CAAC,CAAC,CAAC;;EAE/C;EACAE,SAAS,CAAC,MAAM;IACd,MAAMgB,SAAS,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IAC9C,IAAIF,SAAS,EAAE;MACb,IAAI;QACF,MAAMG,UAAU,GAAGC,IAAI,CAACC,KAAK,CAACL,SAAS,CAAC;QACxCL,YAAY,CAACQ,UAAU,CAAC;MAC1B,CAAC,CAAC,OAAOG,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;QAClDL,YAAY,CAACO,UAAU,CAAC,MAAM,CAAC;MACjC;IACF;EACF,CAAC,EAAE,EAAE,CAAC;;EAEN;EACAxB,SAAS,CAAC,MAAM;IACdiB,YAAY,CAACQ,OAAO,CAAC,MAAM,EAAEL,IAAI,CAACM,SAAS,CAAChB,SAAS,CAAC,CAAC;;IAEvD;IACA,IAAIiB,KAAK,GAAG,CAAC;IACb,IAAIC,KAAK,GAAG,CAAC;IAEblB,SAAS,CAACmB,OAAO,CAACC,IAAI,IAAI;MACxB;MACA,MAAMC,SAAS,GAAGD,IAAI,CAACH,KAAK,GAAGG,IAAI,CAACE,QAAQ;;MAE5C;MACA,IAAIC,UAAU,GAAG,CAAC;MAClB,IAAIH,IAAI,CAACI,MAAM,IAAIJ,IAAI,CAACI,MAAM,CAACC,MAAM,GAAG,CAAC,EAAE;QACzCL,IAAI,CAACI,MAAM,CAACL,OAAO,CAACO,KAAK,IAAI;UAC3B,IAAIA,KAAK,CAACT,KAAK,EAAE;YACfM,UAAU,IAAIG,KAAK,CAACT,KAAK;UAC3B;QACF,CAAC,CAAC;MACJ;MAEAA,KAAK,IAAII,SAAS,GAAIE,UAAU,GAAGH,IAAI,CAACE,QAAS;MACjDJ,KAAK,IAAIE,IAAI,CAACE,QAAQ;IACxB,CAAC,CAAC;IAEFnB,aAAa,CAACc,KAAK,CAAC;IACpBZ,aAAa,CAACa,KAAK,CAAC;EACtB,CAAC,EAAE,CAAClB,SAAS,CAAC,CAAC;;EAEf;EACA,MAAM2B,SAAS,GAAGA,CAACC,IAAI,EAAEN,QAAQ,GAAG,CAAC,EAAEE,MAAM,GAAG,EAAE,EAAEK,UAAU,GAAG,EAAE,KAAK;IACtE5B,YAAY,CAAC6B,SAAS,IAAI;MACxB;MACA,MAAMC,iBAAiB,GAAGD,SAAS,CAACE,SAAS,CAC3CZ,IAAI,IAAIA,IAAI,CAACa,EAAE,KAAKL,IAAI,CAACK,EAAE,IACpBvB,IAAI,CAACM,SAAS,CAACI,IAAI,CAACI,MAAM,CAAC,KAAKd,IAAI,CAACM,SAAS,CAACQ,MAAM,CAAC,IACtDd,IAAI,CAACM,SAAS,CAACI,IAAI,CAACS,UAAU,CAAC,KAAKnB,IAAI,CAACM,SAAS,CAACa,UAAU,CACtE,CAAC;MAED,IAAIE,iBAAiB,IAAI,CAAC,EAAE;QAC1B;QACA,MAAMG,YAAY,GAAG,CAAC,GAAGJ,SAAS,CAAC;QACnCI,YAAY,CAACH,iBAAiB,CAAC,CAACT,QAAQ,IAAIA,QAAQ;QACpD/B,KAAK,CAAC4C,OAAO,CAAC,wBAAwBP,IAAI,CAACQ,IAAI,EAAE,CAAC;QAClD,OAAOF,YAAY;MACrB,CAAC,MAAM;QACL;QACA3C,KAAK,CAAC4C,OAAO,CAAC,SAASP,IAAI,CAACQ,IAAI,UAAU,CAAC;QAC3C,OAAO,CAAC,GAAGN,SAAS,EAAE;UACpBG,EAAE,EAAEL,IAAI,CAACK,EAAE;UACXG,IAAI,EAAER,IAAI,CAACQ,IAAI;UACfnB,KAAK,EAAEW,IAAI,CAACX,KAAK;UACjBoB,KAAK,EAAET,IAAI,CAACU,QAAQ;UACpBhB,QAAQ;UACRE,MAAM;UACNK;QACF,CAAC,CAAC;MACJ;IACF,CAAC,CAAC;EACJ,CAAC;;EAED;EACA,MAAMU,cAAc,GAAGA,CAACC,SAAS,EAAElB,QAAQ,KAAK;IAC9C,IAAIA,QAAQ,GAAG,CAAC,EAAE;IAElBrB,YAAY,CAAC6B,SAAS,IAAI;MACxB,MAAMI,YAAY,GAAG,CAAC,GAAGJ,SAAS,CAAC;MACnCI,YAAY,CAACM,SAAS,CAAC,CAAClB,QAAQ,GAAGA,QAAQ;MAC3C,OAAOY,YAAY;IACrB,CAAC,CAAC;EACJ,CAAC;;EAED;EACA,MAAMO,cAAc,GAAID,SAAS,IAAK;IACpCvC,YAAY,CAAC6B,SAAS,IAAI;MACxB,MAAMV,IAAI,GAAGU,SAAS,CAACU,SAAS,CAAC;MACjCjD,KAAK,CAACmD,IAAI,CAAC,WAAWtB,IAAI,CAACgB,IAAI,YAAY,CAAC;MAC5C,OAAON,SAAS,CAACa,MAAM,CAAC,CAACC,CAAC,EAAEC,KAAK,KAAKA,KAAK,KAAKL,SAAS,CAAC;IAC5D,CAAC,CAAC;EACJ,CAAC;;EAED;EACA,MAAMM,SAAS,GAAGA,CAAA,KAAM;IACtB7C,YAAY,CAAC,EAAE,CAAC;IAChBV,KAAK,CAACmD,IAAI,CAAC,cAAc,CAAC;EAC5B,CAAC;;EAED;EACA,MAAMK,kBAAkB,GAAGA,CAAA,KAAM;IAC/B,OAAO/C,SAAS,CAACgD,GAAG,CAAC5B,IAAI,KAAK;MAC5B6B,MAAM,EAAE7B,IAAI,CAACa,EAAE;MACfX,QAAQ,EAAEF,IAAI,CAACE,QAAQ;MACvBE,MAAM,EAAEJ,IAAI,CAACI,MAAM;MACnBK,UAAU,EAAET,IAAI,CAACS;IACnB,CAAC,CAAC,CAAC;EACL,CAAC;EAED,MAAMqB,KAAK,GAAG;IACZlD,SAAS;IACTE,UAAU;IACVE,UAAU;IACVuB,SAAS;IACTY,cAAc;IACdE,cAAc;IACdK,SAAS;IACTC;EACF,CAAC;EAED,oBACEtD,OAAA,CAACC,WAAW,CAACyD,QAAQ;IAACD,KAAK,EAAEA,KAAM;IAAApD,QAAA,EAChCA;EAAQ;IAAAsD,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACW,CAAC;AAE3B,CAAC;AAACxD,GAAA,CArIWF,YAAY;AAAA2D,EAAA,GAAZ3D,YAAY;AAAA,IAAA2D,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}